{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{motion}from'framer-motion';import{toast}from'react-toastify';import{ArchiveBoxIcon}from'@heroicons/react/24/solid';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ListBags(_ref){let{setError}=_ref;const[bags,setBags]=useState([]);const[filters,setFilters]=useState({type:'',startDate:'',endDate:'',unlinked:false});const[expanded,setExpanded]=useState({});useEffect(()=>{fetchBags();},[filters]);const fetchBags=async()=>{try{const params=new URLSearchParams(filters).toString();const res=await axios.get(`http://localhost:8080/api/bags?${params}`);setBags(res.data);setError(null);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to fetch bags');toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to fetch bags',{position:'top-center'});}};const toggleExpand=id=>{setExpanded(prev=>({...prev,[id]:!prev[id]}));};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},className:\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold text-accent mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(ArchiveBoxIcon,{className:\"w-6 h-6 text-primary mr-2\"}),\"List Bags\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:filters.type,onChange:e=>setFilters({...filters,type:e.target.value}),className:\"w-full p-2 border rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"parent\",children:\"Parent\"}),/*#__PURE__*/_jsx(\"option\",{value:\"child\",children:\"Child\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.startDate,onChange:e=>setFilters({...filters,startDate:e.target.value}),className:\"w-full p-2 border rounded-lg\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filters.endDate,onChange:e=>setFilters({...filters,endDate:e.target.value}),className:\"w-full p-2 border rounded-lg\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:filters.unlinked,onChange:e=>setFilters({...filters,unlinked:e.target.checked}),className:\"mr-2 accent-primary\"}),\"Unlinked Parents Only\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto\",children:bags.map(bag=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center cursor-pointer\",onClick:()=>toggleExpand(bag.bag.id),children:[/*#__PURE__*/_jsxs(\"span\",{children:[bag.bag.qrCode,\" (\",bag.bag.type,\")\"]}),/*#__PURE__*/_jsx(\"span\",{children:expanded[bag.bag.id]?'▲':'▼'})]}),expanded[bag.bag.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4 mt-2\",children:[bag.bag.type==='parent'&&bag.children&&/*#__PURE__*/_jsx(\"ul\",{children:bag.children.map(child=>/*#__PURE__*/_jsx(\"li\",{children:child.qrCode},child.id))}),bag.bag.type==='child'&&bag.parentQR&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Parent: \",bag.parentQR]}),bag.billID&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Bill ID: \",bag.billID]})]})]},bag.bag.id))})]})]});}export default ListBags;","map":{"version":3,"names":["React","useState","useEffect","axios","motion","toast","ArchiveBoxIcon","jsx","_jsx","jsxs","_jsxs","ListBags","_ref","setError","bags","setBags","filters","setFilters","type","startDate","endDate","unlinked","expanded","setExpanded","fetchBags","params","URLSearchParams","toString","res","get","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","error","position","toggleExpand","id","prev","div","initial","opacity","scale","animate","className","children","value","onChange","e","target","checked","map","bag","onClick","qrCode","child","parentQR","billID"],"sources":["/Users/mannu/Desktop/baggsy/frontend/src/components/ListBags.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { motion } from 'framer-motion';\nimport { toast } from 'react-toastify';\nimport { ArchiveBoxIcon } from '@heroicons/react/24/solid';\n\nfunction ListBags({ setError }) {\n  const [bags, setBags] = useState([]);\n  const [filters, setFilters] = useState({ type: '', startDate: '', endDate: '', unlinked: false });\n  const [expanded, setExpanded] = useState({});\n\n  useEffect(() => {\n    fetchBags();\n  }, [filters]);\n\n  const fetchBags = async () => {\n    try {\n      const params = new URLSearchParams(filters).toString();\n      const res = await axios.get(`http://localhost:8080/api/bags?${params}`);\n      setBags(res.data);\n      setError(null);\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to fetch bags');\n      toast.error(err.response?.data?.error || 'Failed to fetch bags', { position: 'top-center' });\n    }\n  };\n\n  const toggleExpand = (id) => {\n    setExpanded((prev) => ({ ...prev, [id]: !prev[id] }));\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\"\n    >\n      <h2 className=\"text-2xl font-semibold text-accent mb-4 flex items-center\">\n        <ArchiveBoxIcon className=\"w-6 h-6 text-primary mr-2\" />\n        List Bags\n      </h2>\n      <div className=\"space-y-4\">\n        <select\n          value={filters.type}\n          onChange={(e) => setFilters({ ...filters, type: e.target.value })}\n          className=\"w-full p-2 border rounded-lg\"\n        >\n          <option value=\"\">All Types</option>\n          <option value=\"parent\">Parent</option>\n          <option value=\"child\">Child</option>\n        </select>\n        <input\n          type=\"date\"\n          value={filters.startDate}\n          onChange={(e) => setFilters({ ...filters, startDate: e.target.value })}\n          className=\"w-full p-2 border rounded-lg\"\n        />\n        <input\n          type=\"date\"\n          value={filters.endDate}\n          onChange={(e) => setFilters({ ...filters, endDate: e.target.value })}\n          className=\"w-full p-2 border rounded-lg\"\n        />\n        <label className=\"flex items-center\">\n          <input\n            type=\"checkbox\"\n            checked={filters.unlinked}\n            onChange={(e) => setFilters({ ...filters, unlinked: e.target.checked })}\n            className=\"mr-2 accent-primary\"\n          />\n          Unlinked Parents Only\n        </label>\n        <div className=\"max-h-64 overflow-y-auto\">\n          {bags.map((bag) => (\n            <div key={bag.bag.id} className=\"border-b py-2\">\n              <div\n                className=\"flex justify-between items-center cursor-pointer\"\n                onClick={() => toggleExpand(bag.bag.id)}\n              >\n                <span>{bag.bag.qrCode} ({bag.bag.type})</span>\n                <span>{expanded[bag.bag.id] ? '▲' : '▼'}</span>\n              </div>\n              {expanded[bag.bag.id] && (\n                <div className=\"ml-4 mt-2\">\n                  {bag.bag.type === 'parent' && bag.children && (\n                    <ul>\n                      {bag.children.map((child) => (\n                        <li key={child.id}>{child.qrCode}</li>\n                      ))}\n                    </ul>\n                  )}\n                  {bag.bag.type === 'child' && bag.parentQR && (\n                    <p>Parent: {bag.parentQR}</p>\n                  )}\n                  {bag.billID && <p>Bill ID: {bag.billID}</p>}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default ListBags;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}