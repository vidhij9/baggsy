{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{motion}from'framer-motion';import{toast}from'react-toastify';import{DocumentTextIcon}from'@heroicons/react/24/solid';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ListBills(_ref){let{setError}=_ref;const[bills,setBills]=useState([]);const[expanded,setExpanded]=useState({});const[expandedParents,setExpandedParents]=useState({});useEffect(()=>{fetchBills();},[]);const fetchBills=async()=>{try{const res=await axios.get('http://localhost:8080/api/bills');setBills(res.data);setError(null);}catch(err){var _err$response,_err$response$data,_err$response2,_err$response2$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to fetch bills');toast.error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to fetch bills',{position:'top-center'});}};const toggleExpandBill=billID=>{setExpanded(prev=>({...prev,[billID]:!prev[billID]}));};const toggleExpandParent=(billID,parentID)=>{setExpandedParents(prev=>({...prev,[`${billID}-${parentID}`]:!prev[`${billID}-${parentID}`]}));};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},className:\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold text-accent mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(DocumentTextIcon,{className:\"w-6 h-6 text-primary mr-2\"}),\"List Bills\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto\",children:bills.map(bill=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b py-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center cursor-pointer\",onClick:()=>toggleExpandBill(bill.billID),children:[/*#__PURE__*/_jsx(\"span\",{children:bill.billID}),/*#__PURE__*/_jsx(\"span\",{children:expanded[bill.billID]?'▲':'▼'})]}),expanded[bill.billID]&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 mt-2\",children:bill.bags.map(bag=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b py-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center cursor-pointer\",onClick:()=>toggleExpandParent(bill.billID,bag.id),children:[/*#__PURE__*/_jsx(\"span\",{children:bag.qrCode}),/*#__PURE__*/_jsx(\"span\",{children:expandedParents[`${bill.billID}-${bag.id}`]?'▲':'▼'})]}),expandedParents[`${bill.billID}-${bag.id}`]&&bag.children&&/*#__PURE__*/_jsx(\"ul\",{className:\"ml-4\",children:bag.children.map(child=>/*#__PURE__*/_jsx(\"li\",{children:child.qrCode},child.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{await axios.delete(`http://localhost:8080/api/unlink-bag/${bag.id}`);fetchBills();toast.success('Bag unlinked successfully!',{position:'top-center'});}catch(err){var _err$response3,_err$response3$data,_err$response4,_err$response4$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||'Failed to unlink bag');toast.error(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.error)||'Failed to unlink bag',{position:'top-center'});}},className:\"text-red-500 hover:text-red-700 text-sm mt-1\",children:\"Unlink\"})]},bag.id))})]},bill.billID))})]});}export default ListBills;","map":{"version":3,"names":["React","useState","useEffect","axios","motion","toast","DocumentTextIcon","jsx","_jsx","jsxs","_jsxs","ListBills","_ref","setError","bills","setBills","expanded","setExpanded","expandedParents","setExpandedParents","fetchBills","res","get","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","response","error","position","toggleExpandBill","billID","prev","toggleExpandParent","parentID","div","initial","opacity","scale","animate","className","children","map","bill","onClick","bags","bag","id","qrCode","child","delete","success","_err$response3","_err$response3$data","_err$response4","_err$response4$data"],"sources":["/Users/mannu/Desktop/baggsy/frontend/src/components/ListBills.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { motion } from 'framer-motion';\nimport { toast } from 'react-toastify';\nimport { DocumentTextIcon } from '@heroicons/react/24/solid';\n\nfunction ListBills({ setError }) {\n  const [bills, setBills] = useState([]);\n  const [expanded, setExpanded] = useState({});\n  const [expandedParents, setExpandedParents] = useState({});\n\n  useEffect(() => {\n    fetchBills();\n  }, []);\n\n  const fetchBills = async () => {\n    try {\n      const res = await axios.get('http://localhost:8080/api/bills');\n      setBills(res.data);\n      setError(null);\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to fetch bills');\n      toast.error(err.response?.data?.error || 'Failed to fetch bills', { position: 'top-center' });\n    }\n  };\n\n  const toggleExpandBill = (billID) => {\n    setExpanded((prev) => ({ ...prev, [billID]: !prev[billID] }));\n  };\n\n  const toggleExpandParent = (billID, parentID) => {\n    setExpandedParents((prev) => ({\n      ...prev,\n      [`${billID}-${parentID}`]: !prev[`${billID}-${parentID}`],\n    }));\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\"\n    >\n      <h2 className=\"text-2xl font-semibold text-accent mb-4 flex items-center\">\n        <DocumentTextIcon className=\"w-6 h-6 text-primary mr-2\" />\n        List Bills\n      </h2>\n      <div className=\"max-h-64 overflow-y-auto\">\n        {bills.map((bill) => (\n          <div key={bill.billID} className=\"border-b py-2\">\n            <div\n              className=\"flex justify-between items-center cursor-pointer\"\n              onClick={() => toggleExpandBill(bill.billID)}\n            >\n              <span>{bill.billID}</span>\n              <span>{expanded[bill.billID] ? '▲' : '▼'}</span>\n            </div>\n            {expanded[bill.billID] && (\n              <div className=\"ml-4 mt-2\">\n                {bill.bags.map((bag) => (\n                  <div key={bag.id} className=\"border-b py-1\">\n                    <div\n                      className=\"flex justify-between items-center cursor-pointer\"\n                      onClick={() => toggleExpandParent(bill.billID, bag.id)}\n                    >\n                      <span>{bag.qrCode}</span>\n                      <span>{expandedParents[`${bill.billID}-${bag.id}`] ? '▲' : '▼'}</span>\n                    </div>\n                    {expandedParents[`${bill.billID}-${bag.id}`] && bag.children && (\n                      <ul className=\"ml-4\">\n                        {bag.children.map((child) => (\n                          <li key={child.id}>{child.qrCode}</li>\n                        ))}\n                      </ul>\n                    )}\n                    <button\n                      onClick={async () => {\n                        try {\n                          await axios.delete(`http://localhost:8080/api/unlink-bag/${bag.id}`);\n                          fetchBills();\n                          toast.success('Bag unlinked successfully!', { position: 'top-center' });\n                        } catch (err) {\n                          setError(err.response?.data?.error || 'Failed to unlink bag');\n                          toast.error(err.response?.data?.error || 'Failed to unlink bag', {\n                            position: 'top-center',\n                          });\n                        }\n                      }}\n                      className=\"text-red-500 hover:text-red-700 text-sm mt-1\"\n                    >\n                      Unlink\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n    </motion.div>\n  );\n}\n\nexport default ListBills;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}