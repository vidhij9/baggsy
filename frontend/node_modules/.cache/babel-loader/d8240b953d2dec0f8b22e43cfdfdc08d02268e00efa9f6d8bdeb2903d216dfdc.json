{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Login from'./components/Login';import RegisterParent from'./components/RegisterParent';import ListBags from'./components/ListBags';import LinkBagsToBillModal from'./components/LinkBagsToBillModal';import ListBills from'./components/ListBills';import Search from'./components/Search';import axios from'axios';import{motion}from'framer-motion';import{SparklesIcon}from'@heroicons/react/24/solid';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[token,setToken]=useState(localStorage.getItem('token'));const[role,setRole]=useState(localStorage.getItem('role'));const[error,setError]=useState(null);const[showLinkModal,setShowLinkModal]=useState(false);useEffect(()=>{if(token){axios.defaults.headers.common['Authorization']=`Bearer ${token}`;}},[token]);const logout=()=>{setToken(null);setRole(null);localStorage.removeItem('token');localStorage.removeItem('role');delete axios.defaults.headers.common['Authorization'];toast.info('Logged out successfully.',{position:'top-center'});};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),!token?/*#__PURE__*/_jsx(Login,{setToken:setToken,setRole:setRole,setError:setError}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-5xl\",children:[/*#__PURE__*/_jsxs(motion.header,{initial:{opacity:0},animate:{opacity:1},className:\"flex justify-between items-center mb-8 bg-white p-4 rounded-xl shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"w-8 h-8 text-primary mr-2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-accent\",children:\"Star Agriseeds Baggsy\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300\",children:\"Logout\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mb-6\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(RegisterParent,{setError:setError}),role===\"admin\"&&/*#__PURE__*/_jsx(ListBags,{setError:setError}),(role===\"employee\"||role===\"admin\")&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLinkModal(true),className:\"bg-secondary text-white py-3 rounded-lg hover:bg-yellow-600 transition duration-300\",children:\"Link Bags to Bill\"}),role===\"admin\"&&/*#__PURE__*/_jsx(ListBills,{setError:setError}),role===\"admin\"&&/*#__PURE__*/_jsx(Search,{setError:setError})]}),showLinkModal&&/*#__PURE__*/_jsx(LinkBagsToBillModal,{setError:setError,closeModal:()=>setShowLinkModal(false)})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ToastContainer","toast","Login","RegisterParent","ListBags","LinkBagsToBillModal","ListBills","Search","axios","motion","SparklesIcon","jsx","_jsx","jsxs","_jsxs","App","token","setToken","localStorage","getItem","role","setRole","error","setError","showLinkModal","setShowLinkModal","defaults","headers","common","logout","removeItem","info","position","className","children","header","initial","opacity","animate","onClick","closeModal"],"sources":["/Users/mannu/Desktop/baggsy/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Login from './components/Login';\nimport RegisterParent from './components/RegisterParent';\nimport ListBags from './components/ListBags';\nimport LinkBagsToBillModal from './components/LinkBagsToBillModal';\nimport ListBills from './components/ListBills';\nimport Search from './components/Search';\nimport axios from 'axios';\nimport { motion } from 'framer-motion';\nimport { SparklesIcon } from '@heroicons/react/24/solid';\n\nfunction App() {\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [role, setRole] = useState(localStorage.getItem('role'));\n  const [error, setError] = useState(null);\n  const [showLinkModal, setShowLinkModal] = useState(false);\n\n  useEffect(() => {\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    }\n  }, [token]);\n\n  const logout = () => {\n    setToken(null);\n    setRole(null);\n    localStorage.removeItem('token');\n    localStorage.removeItem('role');\n    delete axios.defaults.headers.common['Authorization'];\n    toast.info('Logged out successfully.', { position: 'top-center' });\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4\">\n      <ToastContainer />\n      {!token ? (\n        <Login setToken={setToken} setRole={setRole} setError={setError} />\n      ) : (\n        <div className=\"w-full max-w-5xl\">\n          <motion.header\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"flex justify-between items-center mb-8 bg-white p-4 rounded-xl shadow-md\"\n          >\n            <div className=\"flex items-center\">\n              <SparklesIcon className=\"w-8 h-8 text-primary mr-2\" />\n              <h1 className=\"text-3xl font-bold text-accent\">Star Agriseeds Baggsy</h1>\n            </div>\n            <button\n              onClick={logout}\n              className=\"bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition duration-300\"\n            >\n              Logout\n            </button>\n          </motion.header>\n          {error && <p className=\"text-red-500 text-center mb-6\">{error}</p>}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            <RegisterParent setError={setError} />\n            {role === \"admin\" && <ListBags setError={setError} />}\n            {(role === \"employee\" || role === \"admin\") && (\n              <button\n                onClick={() => setShowLinkModal(true)}\n                className=\"bg-secondary text-white py-3 rounded-lg hover:bg-yellow-600 transition duration-300\"\n              >\n                Link Bags to Bill\n              </button>\n            )}\n            {role === \"admin\" && <ListBills setError={setError} />}\n            {role === \"admin\" && <Search setError={setError} />}\n          </div>\n          {showLinkModal && (\n            <LinkBagsToBillModal setError={setError} closeModal={() => setShowLinkModal(false)} />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}