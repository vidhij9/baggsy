{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{motion}from'framer-motion';import{toast}from'react-toastify';import{ArchiveBoxIcon}from'@heroicons/react/24/solid';import RegisterChildModal from'./RegisterChildModal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function RegisterParent(_ref){let{setError}=_ref;const[qr,setQr]=useState('');const[isLoading,setIsLoading]=useState(false);const[showChildModal,setShowChildModal]=useState(false);const[parentData,setParentData]=useState(null);const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);try{const res=await axios.post('http://localhost:8080/api/register-parent',{qrCode:qr,type:'parent'});setParentData(res.data);setShowChildModal(true);setQr('');toast.success('Parent seed bag registered! Now add child bags.',{position:'top-center'});setError(null);}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401){setError('Session expired. Please log in again.');toast.error('Session expired. Logging out...',{position:'top-center'});}else{var _err$response2,_err$response2$data,_err$response3,_err$response3$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Registration failed');toast.error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||'Registration failed',{position:'top-center'});}}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.95},animate:{opacity:1,scale:1},className:\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold text-accent mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(ArchiveBoxIcon,{className:\"w-6 h-6 text-primary mr-2\"}),\"Register Parent Bag\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{value:qr,onChange:e=>setQr(e.target.value),placeholder:\"Scan Parent QR (e.g., P123-10)\",className:\"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-accent\",required:true}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:isLoading,className:`w-full py-3 rounded-lg text-white flex items-center justify-center ${isLoading?'bg-gray-400':'bg-primary hover:bg-green-700'} transition duration-300`,children:[isLoading?/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 mr-2\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8v8z\"})]}):/*#__PURE__*/_jsx(ArchiveBoxIcon,{className:\"w-5 h-5 mr-2\"}),\"Register Parent\"]})]})]}),showChildModal&&parentData&&/*#__PURE__*/_jsx(RegisterChildModal,{parent:parentData,closeModal:()=>{setShowChildModal(false);setParentData(null);},setError:setError})]});}export default RegisterParent;","map":{"version":3,"names":["React","useState","axios","motion","toast","ArchiveBoxIcon","RegisterChildModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterParent","_ref","setError","qr","setQr","isLoading","setIsLoading","showChildModal","setShowChildModal","parentData","setParentData","handleSubmit","e","preventDefault","res","post","qrCode","type","data","success","position","err","_err$response","response","status","error","_err$response2","_err$response2$data","_err$response3","_err$response3$data","children","div","initial","opacity","scale","animate","className","onSubmit","value","onChange","target","placeholder","required","disabled","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","parent","closeModal"],"sources":["/Users/mannu/Desktop/baggsy/frontend/src/components/RegisterParent.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { motion } from 'framer-motion';\nimport { toast } from 'react-toastify';\nimport { ArchiveBoxIcon } from '@heroicons/react/24/solid';\nimport RegisterChildModal from './RegisterChildModal';\n\nfunction RegisterParent({ setError }) {\n  const [qr, setQr] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [showChildModal, setShowChildModal] = useState(false);\n  const [parentData, setParentData] = useState(null);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      const res = await axios.post('http://localhost:8080/api/register-parent', {\n        qrCode: qr,\n        type: 'parent',\n      });\n      setParentData(res.data);\n      setShowChildModal(true);\n      setQr('');\n      toast.success('Parent seed bag registered! Now add child bags.', { position: 'top-center' });\n      setError(null);\n    } catch (err) {\n      if (err.response?.status === 401) {\n        setError('Session expired. Please log in again.');\n        toast.error('Session expired. Logging out...', { position: 'top-center' });\n      } else {\n        setError(err.response?.data?.error || 'Registration failed');\n        toast.error(err.response?.data?.error || 'Registration failed', { position: 'top-center' });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <motion.div\n        initial={{ opacity: 0, scale: 0.95 }}\n        animate={{ opacity: 1, scale: 1 }}\n        className=\"bg-white p-6 rounded-xl shadow-lg border-t-4 border-primary\"\n      >\n        <h2 className=\"text-2xl font-semibold text-accent mb-4 flex items-center\">\n          <ArchiveBoxIcon className=\"w-6 h-6 text-primary mr-2\" />\n          Register Parent Bag\n        </h2>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <input\n            value={qr}\n            onChange={(e) => setQr(e.target.value)}\n            placeholder=\"Scan Parent QR (e.g., P123-10)\"\n            className=\"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-accent\"\n            required\n          />\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className={`w-full py-3 rounded-lg text-white flex items-center justify-center ${\n              isLoading ? 'bg-gray-400' : 'bg-primary hover:bg-green-700'\n            } transition duration-300`}\n          >\n            {isLoading ? (\n              <svg className=\"animate-spin h-5 w-5 mr-2\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\n              </svg>\n            ) : (\n              <ArchiveBoxIcon className=\"w-5 h-5 mr-2\" />\n            )}\n            Register Parent\n          </button>\n        </form>\n      </motion.div>\n      {showChildModal && parentData && (\n        <RegisterChildModal\n          parent={parentData}\n          closeModal={() => {\n            setShowChildModal(false);\n            setParentData(null);\n          }}\n          setError={setError}\n        />\n      )}\n    </>\n  );\n}\n\nexport default RegisterParent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}