{"ast":null,"code":"import React from'react';import axios from'axios';import{motion}from'framer-motion';import{SparklesIcon}from'@heroicons/react/24/solid';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setToken,setRole,setError}=_ref;const login=async()=>{try{const res=await axios.post('http://backend:8080/login',{username:'admin',password:'password'});setToken(res.data.token);localStorage.setItem('token',res.data.token);const tokenParts=res.data.token.split('.');const payload=JSON.parse(atob(tokenParts[1]));setRole(payload.role);localStorage.setItem('role',payload.role);toast.success('Logged into Star Agriseeds Baggsy!',{position:'top-center'});setError(null);}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Login failed. Please check backend logs.';setError(errorMsg);toast.error(errorMsg,{position:'top-center'});}};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md border-t-4 border-primary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-6\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"w-8 h-8 text-primary mr-2\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-accent\",children:\"Star Agriseeds\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:login// Ensure this references the defined login function\n,className:\"w-full bg-primary text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(SparklesIcon,{className:\"w-5 h-5 mr-2\"}),\"Login to Baggsy\"]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mt-4\",children:error})]});}export default Login;","map":{"version":3,"names":["React","axios","motion","SparklesIcon","toast","jsx","_jsx","jsxs","_jsxs","Login","_ref","setToken","setRole","setError","login","res","post","username","password","data","token","localStorage","setItem","tokenParts","split","payload","JSON","parse","atob","role","success","position","err","_err$response","_err$response$data","errorMsg","response","error","div","initial","opacity","y","animate","className","children","onClick"],"sources":["/Users/mannu/Desktop/baggsy/frontend/src/components/Login.js"],"sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { motion } from 'framer-motion';\nimport { SparklesIcon } from '@heroicons/react/24/solid';\nimport { toast } from 'react-toastify';\n\nfunction Login({ setToken, setRole, setError }) {\n  const login = async () => {\n    try {\n      const res = await axios.post('http://backend:8080/login', {\n        username: 'admin',\n        password: 'password',\n      });\n      setToken(res.data.token);\n      localStorage.setItem('token', res.data.token);\n      const tokenParts = res.data.token.split('.');\n      const payload = JSON.parse(atob(tokenParts[1]));\n      setRole(payload.role);\n      localStorage.setItem('role', payload.role);\n      toast.success('Logged into Star Agriseeds Baggsy!', { position: 'top-center' });\n      setError(null);\n    } catch (err) {\n      const errorMsg = err.response?.data?.error || 'Login failed. Please check backend logs.';\n      setError(errorMsg);\n      toast.error(errorMsg, { position: 'top-center' });\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md border-t-4 border-primary\"\n    >\n      <div className=\"flex items-center justify-center mb-6\">\n        <SparklesIcon className=\"w-8 h-8 text-primary mr-2\" />\n        <h1 className=\"text-3xl font-bold text-accent\">Star Agriseeds</h1>\n      </div>\n      <button\n        onClick={login}  // Ensure this references the defined login function\n        className=\"w-full bg-primary text-white py-3 rounded-lg hover:bg-green-700 transition duration-300 flex items-center justify-center\"\n      >\n        <SparklesIcon className=\"w-5 h-5 mr-2\" />\n        Login to Baggsy\n      </button>\n      {error && <p className=\"text-red-500 text-center mt-4\">{error}</p>}\n    </motion.div>\n  );\n}\n\nexport default Login;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,eAAe,CACtC,OAASC,YAAY,KAAQ,2BAA2B,CACxD,OAASC,KAAK,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,QAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAkC,IAAjC,CAAEC,QAAQ,CAAEC,OAAO,CAAEC,QAAS,CAAC,CAAAH,IAAA,CAC5C,KAAM,CAAAI,KAAK,CAAG,KAAAA,CAAA,GAAY,CACxB,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAd,KAAK,CAACe,IAAI,CAAC,2BAA2B,CAAE,CACxDC,QAAQ,CAAE,OAAO,CACjBC,QAAQ,CAAE,UACZ,CAAC,CAAC,CACFP,QAAQ,CAACI,GAAG,CAACI,IAAI,CAACC,KAAK,CAAC,CACxBC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEP,GAAG,CAACI,IAAI,CAACC,KAAK,CAAC,CAC7C,KAAM,CAAAG,UAAU,CAAGR,GAAG,CAACI,IAAI,CAACC,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAC5C,KAAM,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAC/CX,OAAO,CAACa,OAAO,CAACI,IAAI,CAAC,CACrBR,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEG,OAAO,CAACI,IAAI,CAAC,CAC1CzB,KAAK,CAAC0B,OAAO,CAAC,oCAAoC,CAAE,CAAEC,QAAQ,CAAE,YAAa,CAAC,CAAC,CAC/ElB,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAE,MAAOmB,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ,KAAM,CAAAC,QAAQ,CAAG,EAAAF,aAAA,CAAAD,GAAG,CAACI,QAAQ,UAAAH,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcd,IAAI,UAAAe,kBAAA,iBAAlBA,kBAAA,CAAoBG,KAAK,GAAI,0CAA0C,CACxFxB,QAAQ,CAACsB,QAAQ,CAAC,CAClB/B,KAAK,CAACiC,KAAK,CAACF,QAAQ,CAAE,CAAEJ,QAAQ,CAAE,YAAa,CAAC,CAAC,CACnD,CACF,CAAC,CAED,mBACEvB,KAAA,CAACN,MAAM,CAACoC,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,SAAS,CAAC,8EAA8E,CAAAC,QAAA,eAExFpC,KAAA,QAAKmC,SAAS,CAAC,uCAAuC,CAAAC,QAAA,eACpDtC,IAAA,CAACH,YAAY,EAACwC,SAAS,CAAC,2BAA2B,CAAE,CAAC,cACtDrC,IAAA,OAAIqC,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,EAC/D,CAAC,cACNpC,KAAA,WACEqC,OAAO,CAAE/B,KAAQ;AAAA,CACjB6B,SAAS,CAAC,0HAA0H,CAAAC,QAAA,eAEpItC,IAAA,CAACH,YAAY,EAACwC,SAAS,CAAC,cAAc,CAAE,CAAC,kBAE3C,EAAQ,CAAC,CACRN,KAAK,eAAI/B,IAAA,MAAGqC,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEP,KAAK,CAAI,CAAC,EACxD,CAAC,CAEjB,CAEA,cAAe,CAAA5B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}